<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Ye Vesta Home Brewing: Referência do Arquivo app/bkp.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logoyevesta.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ye Vesta Home Brewing
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Controle de temperatura de um kegerator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Busca');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Página&#160;Principal</span></a></li>
      <li><a href="annotated.html"><span>Estruturas&#160;de&#160;Dados</span></a></li>
      <li class="current"><a href="files.html"><span>Arquivos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Busca" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Lista&#160;de&#160;Arquivos</span></a></li>
      <li><a href="globals.html"><span>Globais</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d422163b96683743ed3963d4aac17747.html">app</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Estruturas de Dados</a> &#124;
<a href="#define-members">Definições e Macros</a> &#124;
<a href="#func-members">Funções</a> &#124;
<a href="#var-members">Variáveis</a>  </div>
  <div class="headertitle">
<div class="title">Referência do Arquivo bkp.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="user__config_8h_source.html">user_config.h</a>&gt;</code><br />
<code>#include &lt;SmingCore/SmingCore.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Gráfico de dependência de inclusões para bkp.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="bkp_8cpp__incl.png" border="0" usemap="#app_2bkp_8cpp" alt=""/></div>
<map name="app_2bkp_8cpp" id="app_2bkp_8cpp">
<area shape="rect" id="node2" href="user__config_8h.html" title="user_config.h" alt="" coords="409,80,509,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Estruturas de Dados</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprogs.html">progs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valores de maxima e minima para as temperaturas.  <a href="structprogs.html#details">Mais...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Definições e Macros</h2></td></tr>
<tr class="memitem:af1287a36f39005e19239757c1c902465"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#af1287a36f39005e19239757c1c902465">MQTT_ID</a>&#160;&#160;&#160;&quot;ElectroDragon&quot;</td></tr>
<tr class="memdesc:af1287a36f39005e19239757c1c902465"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controlador de temperaturas para fases da cerveja Controle de fermentacao, maturacao e priming.  <a href="#af1287a36f39005e19239757c1c902465">Mais...</a><br /></td></tr>
<tr class="separator:af1287a36f39005e19239757c1c902465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03acf61c3de2517e471494cea2f44755"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a03acf61c3de2517e471494cea2f44755">MQTT_BROKER</a>&#160;&#160;&#160;&quot;192.168.1.2&quot;</td></tr>
<tr class="separator:a03acf61c3de2517e471494cea2f44755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8632baff6bbb5004385998918f1e6bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#aa8632baff6bbb5004385998918f1e6bd">MQTT_PORT</a>&#160;&#160;&#160;1883</td></tr>
<tr class="separator:aa8632baff6bbb5004385998918f1e6bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61322cd056179f03c046357d8415f94c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a61322cd056179f03c046357d8415f94c">MQTT_USER</a>&#160;&#160;&#160;&quot;dobitaobyte&quot;</td></tr>
<tr class="separator:a61322cd056179f03c046357d8415f94c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af835ca2e62a58a0185a7b26119b5a28a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#af835ca2e62a58a0185a7b26119b5a28a">MQTT_PASSWD</a>&#160;&#160;&#160;&quot;senha&quot;</td></tr>
<tr class="separator:af835ca2e62a58a0185a7b26119b5a28a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a400d28e1af2bcd57bf651dc23290a6d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a400d28e1af2bcd57bf651dc23290a6d3">MQTT_TOPIC</a>&#160;&#160;&#160;&quot;beer/temperature&quot;</td></tr>
<tr class="separator:a400d28e1af2bcd57bf651dc23290a6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a307da947c47f9579fc559a12c256ab96"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a>&#160;&#160;&#160;&quot;/flash/program.ini&quot;</td></tr>
<tr class="separator:a307da947c47f9579fc559a12c256ab96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d4676733f5e850f451942b6d901382"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a69d4676733f5e850f451942b6d901382">LOG_FILE</a>&#160;&#160;&#160;&quot;/flash/yevesta.log&quot;</td></tr>
<tr class="separator:a69d4676733f5e850f451942b6d901382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a707ee489709a9b3c044992ba98782d0c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>&#160;&#160;&#160;&quot;/flash/limits.ini&quot;</td></tr>
<tr class="separator:a707ee489709a9b3c044992ba98782d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac08aeb1550b2af3e525809616d2053b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#ac08aeb1550b2af3e525809616d2053b6">MY_SSID</a>&#160;&#160;&#160;&quot;SuhankoFamily&quot;</td></tr>
<tr class="separator:ac08aeb1550b2af3e525809616d2053b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8fdb5978250039eb1280a41af8a490a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#ad8fdb5978250039eb1280a41af8a490a">MY_PASSWD</a>&#160;&#160;&#160;&quot;fsjmr112&quot;</td></tr>
<tr class="separator:ad8fdb5978250039eb1280a41af8a490a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45d328ff2302c5cc94268b38344ca3a0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a45d328ff2302c5cc94268b38344ca3a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17efb948c2a3efc0d6e60165e4d2dbc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>&#160;&#160;&#160;13</td></tr>
<tr class="separator:a17efb948c2a3efc0d6e60165e4d2dbc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funções</h2></td></tr>
<tr class="memitem:a892beb36b29757b806f0c0b4f7297194"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a> ()</td></tr>
<tr class="memdesc:a892beb36b29757b806f0c0b4f7297194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inicializador da conexão com o broker.  <a href="#a892beb36b29757b806f0c0b4f7297194">Mais...</a><br /></td></tr>
<tr class="separator:a892beb36b29757b806f0c0b4f7297194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf973281aa7136adc0a9cbcb6e987d11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived</a> (String topic, String msg)</td></tr>
<tr class="memdesc:acf973281aa7136adc0a9cbcb6e987d11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback do MQTT.  <a href="#acf973281aa7136adc0a9cbcb6e987d11">Mais...</a><br /></td></tr>
<tr class="separator:acf973281aa7136adc0a9cbcb6e987d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cc79d426dc372ffc2ab63b89e4a6ffc"><td class="memItemLeft" align="right" valign="top">MqttClient&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a> (<a class="el" href="bkp_8cpp.html#a03acf61c3de2517e471494cea2f44755">MQTT_BROKER</a>, <a class="el" href="bkp_8cpp.html#aa8632baff6bbb5004385998918f1e6bd">MQTT_PORT</a>, <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived</a>)</td></tr>
<tr class="memdesc:a9cc79d426dc372ffc2ab63b89e4a6ffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Criacao do objeto para comunicacao via MQTT.  <a href="#a9cc79d426dc372ffc2ab63b89e4a6ffc">Mais...</a><br /></td></tr>
<tr class="separator:a9cc79d426dc372ffc2ab63b89e4a6ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4a3cef40cd8acefe8d3913380a814a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a> ()</td></tr>
<tr class="memdesc:a0a4a3cef40cd8acefe8d3913380a814a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lista arquivos no sistema de arquivos SPIFFS.  <a href="#a0a4a3cef40cd8acefe8d3913380a814a">Mais...</a><br /></td></tr>
<tr class="separator:a0a4a3cef40cd8acefe8d3913380a814a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae699343bc1f025ded5a0c253b82b5523"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a> (unsigned long interval_ms)</td></tr>
<tr class="memdesc:ae699343bc1f025ded5a0c253b82b5523"><td class="mdescLeft">&#160;</td><td class="mdescRight">Função de sleep sem delay no hardware.  <a href="#ae699343bc1f025ded5a0c253b82b5523">Mais...</a><br /></td></tr>
<tr class="separator:ae699343bc1f025ded5a0c253b82b5523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af194b7304fe850600cc1028dbbb046ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#af194b7304fe850600cc1028dbbb046ea">split</a> (char *buf, int size)</td></tr>
<tr class="memdesc:af194b7304fe850600cc1028dbbb046ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reatribuição da struct programs.  <a href="#af194b7304fe850600cc1028dbbb046ea">Mais...</a><br /></td></tr>
<tr class="separator:af194b7304fe850600cc1028dbbb046ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa6660710b4c098bf036f8a48d80da5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#afa6660710b4c098bf036f8a48d80da5a">strToProg</a> ()</td></tr>
<tr class="memdesc:afa6660710b4c098bf036f8a48d80da5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Carrega os valores do arquivo limits.ini.  <a href="#afa6660710b4c098bf036f8a48d80da5a">Mais...</a><br /></td></tr>
<tr class="separator:afa6660710b4c098bf036f8a48d80da5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c13c1adbd13c2d14b6a212d469d50da"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a2c13c1adbd13c2d14b6a212d469d50da">progToStr</a> ()</td></tr>
<tr class="memdesc:a2c13c1adbd13c2d14b6a212d469d50da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converte valores do enumerador  em String.  <a href="#a2c13c1adbd13c2d14b6a212d469d50da">Mais...</a><br /></td></tr>
<tr class="separator:a2c13c1adbd13c2d14b6a212d469d50da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662d66308f72e9df40e791c4a5c5346b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a662d66308f72e9df40e791c4a5c5346b">writePrograms</a> ()</td></tr>
<tr class="memdesc:a662d66308f72e9df40e791c4a5c5346b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escreve os limites de temperatura no arquivo limits.ini.  <a href="#a662d66308f72e9df40e791c4a5c5346b">Mais...</a><br /></td></tr>
<tr class="separator:a662d66308f72e9df40e791c4a5c5346b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef33cd7f378fde34666db36ef28b78ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#aef33cd7f378fde34666db36ef28b78ed">settingTemps</a> (String toSlice)</td></tr>
<tr class="memdesc:aef33cd7f378fde34666db36ef28b78ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuração das temperaturas.  <a href="#aef33cd7f378fde34666db36ef28b78ed">Mais...</a><br /></td></tr>
<tr class="separator:aef33cd7f378fde34666db36ef28b78ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0649cc41f4634a4f04a2952a26b81be1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a0649cc41f4634a4f04a2952a26b81be1">adjustment</a> (int A, int B, int C)</td></tr>
<tr class="memdesc:a0649cc41f4634a4f04a2952a26b81be1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuração dos pinos de GPIO.  <a href="#a0649cc41f4634a4f04a2952a26b81be1">Mais...</a><br /></td></tr>
<tr class="separator:a0649cc41f4634a4f04a2952a26b81be1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab46c9200feab2324aece7d95d81b422"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent</a> (String msg)</td></tr>
<tr class="memdesc:aab46c9200feab2324aece7d95d81b422"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log de excessões.  <a href="#aab46c9200feab2324aece7d95d81b422">Mais...</a><br /></td></tr>
<tr class="separator:aab46c9200feab2324aece7d95d81b422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f3533cd006030374cbea6c61ec7e20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader</a> ()</td></tr>
<tr class="memdesc:a49f3533cd006030374cbea6c61ec7e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Se existir, carrega o valor do arquivo program.ini.  <a href="#a49f3533cd006030374cbea6c61ec7e20">Mais...</a><br /></td></tr>
<tr class="separator:a49f3533cd006030374cbea6c61ec7e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17bf582f7905e9142f5498c426bebba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram</a> (String flag)</td></tr>
<tr class="memdesc:ab17bf582f7905e9142f5498c426bebba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escolha da fase.  <a href="#ab17bf582f7905e9142f5498c426bebba">Mais...</a><br /></td></tr>
<tr class="separator:ab17bf582f7905e9142f5498c426bebba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8fc66eef843fe30c761b569fb794929"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#ac8fc66eef843fe30c761b569fb794929">readFile</a> (String fileToRead)</td></tr>
<tr class="memdesc:ac8fc66eef843fe30c761b569fb794929"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leitor do conteúdo de um arquivo.  <a href="#ac8fc66eef843fe30c761b569fb794929">Mais...</a><br /></td></tr>
<tr class="separator:ac8fc66eef843fe30c761b569fb794929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d88cd4d6d8755463f3044ebe71365f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a2d88cd4d6d8755463f3044ebe71365f2">checkMQTTDisconnect</a> (TcpClient &amp;client, bool flag)</td></tr>
<tr class="memdesc:a2d88cd4d6d8755463f3044ebe71365f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reinicia a conexão com o broker em caso de desconexão.  <a href="#a2d88cd4d6d8755463f3044ebe71365f2">Mais...</a><br /></td></tr>
<tr class="separator:a2d88cd4d6d8755463f3044ebe71365f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b874ff4f8dab5941a2f40cb8720b5f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a6b874ff4f8dab5941a2f40cb8720b5f4">publishIamLive</a> ()</td></tr>
<tr class="memdesc:a6b874ff4f8dab5941a2f40cb8720b5f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apenas publica o status da conexão.  <a href="#a6b874ff4f8dab5941a2f40cb8720b5f4">Mais...</a><br /></td></tr>
<tr class="separator:a6b874ff4f8dab5941a2f40cb8720b5f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f39764260e93458ec30c2766b9a4581"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a6f39764260e93458ec30c2766b9a4581">failed</a> ()</td></tr>
<tr class="memdesc:a6f39764260e93458ec30c2766b9a4581"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chamada em caso de falha da conexão com o broker.  <a href="#a6f39764260e93458ec30c2766b9a4581">Mais...</a><br /></td></tr>
<tr class="separator:a6f39764260e93458ec30c2766b9a4581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00bc60a1bfa7bed7fb38c7f453ef2717"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a00bc60a1bfa7bed7fb38c7f453ef2717">successful</a> ()</td></tr>
<tr class="memdesc:a00bc60a1bfa7bed7fb38c7f453ef2717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chamada em caso de sucesso na conexão com o broker.  <a href="#a00bc60a1bfa7bed7fb38c7f453ef2717">Mais...</a><br /></td></tr>
<tr class="separator:a00bc60a1bfa7bed7fb38c7f453ef2717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33357d3b1f43ab361de47f76beba33c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if</a> ()</td></tr>
<tr class="memdesc:a33357d3b1f43ab361de47f76beba33c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuração inicial da interface sta e desabilitação do modo AP.  <a href="#a33357d3b1f43ab361de47f76beba33c7">Mais...</a><br /></td></tr>
<tr class="separator:a33357d3b1f43ab361de47f76beba33c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10ba9aa93cfd1e6af68654041615a66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#ac10ba9aa93cfd1e6af68654041615a66">keepLooking</a> ()</td></tr>
<tr class="memdesc:ac10ba9aa93cfd1e6af68654041615a66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Garantia da conexão constate.  <a href="#ac10ba9aa93cfd1e6af68654041615a66">Mais...</a><br /></td></tr>
<tr class="separator:ac10ba9aa93cfd1e6af68654041615a66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02fd73d861ef2e4aabb38c0c9ff82947"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a> ()</td></tr>
<tr class="memdesc:a02fd73d861ef2e4aabb38c0c9ff82947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inicializador de execução.  <a href="#a02fd73d861ef2e4aabb38c0c9ff82947">Mais...</a><br /></td></tr>
<tr class="separator:a02fd73d861ef2e4aabb38c0c9ff82947"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variáveis</h2></td></tr>
<tr class="memitem:ac28522b48efb5bbb85cfbe9d936840d2"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#ac28522b48efb5bbb85cfbe9d936840d2">program_to</a> = &quot;M&quot;</td></tr>
<tr class="memdesc:ac28522b48efb5bbb85cfbe9d936840d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variavel que recebe a flag do estilo de programa.  <a href="#ac28522b48efb5bbb85cfbe9d936840d2">Mais...</a><br /></td></tr>
<tr class="separator:ac28522b48efb5bbb85cfbe9d936840d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adddccc5d8a187f367f29a7f3505bf5fe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structprogs.html">progs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a> = {19.0,22.0,1.0,2.0,20.0,22.0}</td></tr>
<tr class="separator:adddccc5d8a187f367f29a7f3505bf5fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e734a068d8a801de60c91fd69bc065"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a> = programs.fermentation_min</td></tr>
<tr class="memdesc:a19e734a068d8a801de60c91fd69bc065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atribuicao de temperatura minima.  <a href="#a19e734a068d8a801de60c91fd69bc065">Mais...</a><br /></td></tr>
<tr class="separator:a19e734a068d8a801de60c91fd69bc065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73dae65344123317a4a416e34b6cc29d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a> = programs.fermentation_max</td></tr>
<tr class="memdesc:a73dae65344123317a4a416e34b6cc29d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atribuicao de temperatura maxima.  <a href="#a73dae65344123317a4a416e34b6cc29d">Mais...</a><br /></td></tr>
<tr class="separator:a73dae65344123317a4a416e34b6cc29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a869994b48a9246624503f4d4a37bc3e0"><td class="memItemLeft" align="right" valign="top">Timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a869994b48a9246624503f4d4a37bc3e0">procTimer</a></td></tr>
<tr class="separator:a869994b48a9246624503f4d4a37bc3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a0ce9d431921ecc0c5b9fdb0705f7f5"><td class="memItemLeft" align="right" valign="top">Timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a7a0ce9d431921ecc0c5b9fdb0705f7f5">checkConn</a></td></tr>
<tr class="separator:a7a0ce9d431921ecc0c5b9fdb0705f7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c4701bf00d8a3fd7f570981dd8020a"><td class="memItemLeft" align="right" valign="top">Timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a09c4701bf00d8a3fd7f570981dd8020a">ESPlives</a></td></tr>
<tr class="separator:a09c4701bf00d8a3fd7f570981dd8020a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9a3c5d18326d2e9f7cc17ebca036b3"><td class="memItemLeft" align="right" valign="top">Timer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bkp_8cpp.html#a5e9a3c5d18326d2e9f7cc17ebca036b3">loadLimits</a></td></tr>
<tr class="separator:a5e9a3c5d18326d2e9f7cc17ebca036b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Definições e macros</h2>
<a class="anchor" id="a307da947c47f9579fc559a12c256ab96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INI_FILE&#160;&#160;&#160;&quot;/flash/program.ini&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram()</a> e <a class="el" href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader()</a>.</p>

</div>
</div>
<a class="anchor" id="a707ee489709a9b3c044992ba98782d0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LIM_FILE&#160;&#160;&#160;&quot;/flash/limits.ini&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#afa6660710b4c098bf036f8a48d80da5a">strToProg()</a> e <a class="el" href="bkp_8cpp.html#a662d66308f72e9df40e791c4a5c5346b">writePrograms()</a>.</p>

</div>
</div>
<a class="anchor" id="a69d4676733f5e850f451942b6d901382"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_FILE&#160;&#160;&#160;&quot;/flash/yevesta.log&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a03acf61c3de2517e471494cea2f44755"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_BROKER&#160;&#160;&#160;&quot;192.168.1.2&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af1287a36f39005e19239757c1c902465"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_ID&#160;&#160;&#160;&quot;ElectroDragon&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controlador de temperaturas para fases da cerveja Controle de fermentacao, maturacao e priming. </p>
<p>A producao da cerveja possui 3 fases diferentes, nas quais as temperaturas precisam ser ajustadas. Esse programa em um ESP8266 com 2 reles ajuda nesse controle, dando um feedback via MQTT. </p>

</div>
</div>
<a class="anchor" id="af835ca2e62a58a0185a7b26119b5a28a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_PASSWD&#160;&#160;&#160;&quot;senha&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a> e <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8632baff6bbb5004385998918f1e6bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_PORT&#160;&#160;&#160;1883</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a400d28e1af2bcd57bf651dc23290a6d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_TOPIC&#160;&#160;&#160;&quot;beer/temperature&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a61322cd056179f03c046357d8415f94c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_USER&#160;&#160;&#160;&quot;dobitaobyte&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a> e <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8fdb5978250039eb1280a41af8a490a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MY_PASSWD&#160;&#160;&#160;&quot;senha&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if()</a>.</p>

</div>
</div>
<a class="anchor" id="ac08aeb1550b2af3e525809616d2053b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MY_SSID&#160;&#160;&#160;&quot;ssid_do_wifi&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if()</a>.</p>

</div>
</div>
<a class="anchor" id="a45d328ff2302c5cc94268b38344ca3a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RELAY_ONE_PIN&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a0649cc41f4634a4f04a2952a26b81be1">adjustment()</a> e <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a>.</p>

</div>
</div>
<a class="anchor" id="a17efb948c2a3efc0d6e60165e4d2dbc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RELAY_TWO_PIN&#160;&#160;&#160;13</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a0649cc41f4634a4f04a2952a26b81be1">adjustment()</a> e <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a>.</p>

</div>
</div>
<h2 class="groupheader">Funções</h2>
<a class="anchor" id="a0649cc41f4634a4f04a2952a26b81be1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adjustment </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>C</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configuração dos pinos de GPIO. </p>
<p>Essa função faz a configuração inicial dos pinos para o modo de boot do ESP8266, assim como configura o modo dos pinos dos relés. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a> e <a class="el" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                    {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">//programing = 0 1 0</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">//normal     = 1 1 0</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">//sd boot    = 0 0 1</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    pinMode(0,OUTPUT);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    pinMode(2,OUTPUT);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    pinMode(15,OUTPUT);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    </div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    pinMode(<a class="code" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a>,OUTPUT);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    pinMode(<a class="code" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>,OUTPUT);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    digitalWrite(0,A);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    digitalWrite(2,B);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    digitalWrite(15,C);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a45d328ff2302c5cc94268b38344ca3a0"><div class="ttname"><a href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a></div><div class="ttdeci">#define RELAY_ONE_PIN</div><div class="ttdef"><b>Definition:</b> bkp.cpp:35</div></div>
<div class="ttc" id="bkp_8cpp_html_a17efb948c2a3efc0d6e60165e4d2dbc2"><div class="ttname"><a href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a></div><div class="ttdeci">#define RELAY_TWO_PIN</div><div class="ttdef"><b>Definition:</b> bkp.cpp:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2d88cd4d6d8755463f3044ebe71365f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkMQTTDisconnect </td>
          <td>(</td>
          <td class="paramtype">TcpClient &amp;&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reinicia a conexão com o broker em caso de desconexão. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a869994b48a9246624503f4d4a37bc3e0">procTimer</a> e <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a>.</p>
<div class="fragment"><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                                                      {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (flag == <span class="keyword">true</span>){</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        Serial.println(<span class="stringliteral">&quot;MQTT Broker Disconnected!!&quot;</span>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        Serial.println(<span class="stringliteral">&quot;MQTT Broker Unreachable!!&quot;</span>);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="bkp_8cpp.html#a869994b48a9246624503f4d4a37bc3e0">procTimer</a>.initializeMs(2000, <a class="code" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a>).start();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a869994b48a9246624503f4d4a37bc3e0"><div class="ttname"><a href="bkp_8cpp.html#a869994b48a9246624503f4d4a37bc3e0">procTimer</a></div><div class="ttdeci">Timer procTimer</div><div class="ttdef"><b>Definition:</b> bkp.cpp:70</div></div>
<div class="ttc" id="bkp_8cpp_html_a892beb36b29757b806f0c0b4f7297194"><div class="ttname"><a href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a></div><div class="ttdeci">void startMqttClient()</div><div class="ttdoc">Inicializador da conexão com o broker. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:543</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab17bf582f7905e9142f5498c426bebba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void defineProgram </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escolha da fase. </p>
<p>Quando publicado por MQTT o programa desejado (sendo Fermentation, Maturation ou Priming), o callback <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11" title="Callback do MQTT. ">onMessageReceived(String topic, String msg)</a> se encarrega de chamar essa função. O parâmetro recebido é o tipo escolhido, sendo as opções 'F' para fermentação, 'M' para maturação e 'P' para priming. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a> e <a class="el" href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a>.</p>
<div class="fragment"><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                               {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordtype">char</span> data[5] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    </div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> (fileExist(<a class="code" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a>)){</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        Serial.println(<span class="stringliteral">&quot;Removendo arquivo anterior...&quot;</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        fileDelete(<a class="code" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    </div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    file_t program_ini = fileOpen(<a class="code" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a>,eFO_ReadWrite | eFO_CreateIfNotExist);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    </div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (program_ini &lt; 0){</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        Serial.print(<span class="stringliteral">&quot;Erro ao abrir arquivo&quot;</span>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">char</span> teste = flag.charAt(0);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    fileWrite(program_ini,&amp;teste,1);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    </div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    fileSeek(program_ini,0,eSO_FileStart);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordtype">char</span> wrote;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">int</span> content = fileRead(program_ini,&amp;wrote,1);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    Serial.print(<span class="stringliteral">&quot;Content: &quot;</span>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    Serial.println(content);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    Serial.print(<span class="stringliteral">&quot;Arquivo contem: &quot;</span>);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    Serial.println(wrote);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    </div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    fileClose(program_ini);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    </div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader</a>();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a49f3533cd006030374cbea6c61ec7e20"><div class="ttname"><a href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader</a></div><div class="ttdeci">void programLoader()</div><div class="ttdoc">Se existir, carrega o valor do arquivo program.ini. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:325</div></div>
<div class="ttc" id="bkp_8cpp_html_a307da947c47f9579fc559a12c256ab96"><div class="ttname"><a href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a></div><div class="ttdeci">#define INI_FILE</div><div class="ttdef"><b>Definition:</b> bkp.cpp:28</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6f39764260e93458ec30c2766b9a4581"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void failed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chamada em caso de falha da conexão com o broker. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if()</a>.</p>
<div class="fragment"><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;             {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    Serial.println(<span class="stringliteral">&quot;Falha na conexao de rede!&quot;</span>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">//qualquer coisa mais, colocar por aqui.</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent</a>(<span class="stringliteral">&quot;Falha na conexao de rede&quot;</span>);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_aab46c9200feab2324aece7d95d81b422"><div class="ttname"><a href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent</a></div><div class="ttdeci">void logEvent(String msg)</div><div class="ttdoc">Log de excessões. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:306</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a02fd73d861ef2e4aabb38c0c9ff82947"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inicializador de execução. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a0649cc41f4634a4f04a2952a26b81be1">adjustment()</a>, <a class="el" href="bkp_8cpp.html#a7a0ce9d431921ecc0c5b9fdb0705f7f5">checkConn</a>, <a class="el" href="bkp_8cpp.html#a09c4701bf00d8a3fd7f570981dd8020a">ESPlives</a>, <a class="el" href="bkp_8cpp.html#ac10ba9aa93cfd1e6af68654041615a66">keepLooking()</a>, <a class="el" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt()</a>, <a class="el" href="bkp_8cpp.html#af835ca2e62a58a0185a7b26119b5a28a">MQTT_PASSWD</a>, <a class="el" href="bkp_8cpp.html#a61322cd056179f03c046357d8415f94c">MQTT_USER</a>, <a class="el" href="bkp_8cpp.html#a6b874ff4f8dab5941a2f40cb8720b5f4">publishIamLive()</a>, <a class="el" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep()</a> e <a class="el" href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if()</a>.</p>
<div class="fragment"><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;           {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    spiffs_mount();</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <a class="code" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a>(20);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="bkp_8cpp.html#a0649cc41f4634a4f04a2952a26b81be1">adjustment</a>(HIGH,HIGH,LOW);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    </div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    Serial.begin(115200);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a>(200);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    Serial.println(<span class="stringliteral">&quot;Iniciada a serial...&quot;</span>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if</a>();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;       </div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    String ip_adr = WifiStation.getIP().toString();</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    Serial.print(<span class="stringliteral">&quot;Endereco IP: &quot;</span>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    Serial.println(ip_adr);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    </div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.connect(<span class="stringliteral">&quot;ElectroDragon&quot;</span>,<a class="code" href="bkp_8cpp.html#a61322cd056179f03c046357d8415f94c">MQTT_USER</a>,<a class="code" href="bkp_8cpp.html#af835ca2e62a58a0185a7b26119b5a28a">MQTT_PASSWD</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    Serial.println(<span class="stringliteral">&quot;Iniciada a conexao com o broker MQTT...&quot;</span>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.subscribe(<span class="stringliteral">&quot;beer/#&quot;</span>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    Serial.println(<span class="stringliteral">&quot;Subscricao para o topico beer/#&quot;</span>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    </div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="bkp_8cpp.html#a7a0ce9d431921ecc0c5b9fdb0705f7f5">checkConn</a>.initializeMs(3000, <a class="code" href="bkp_8cpp.html#ac10ba9aa93cfd1e6af68654041615a66">keepLooking</a>).start();   </div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="bkp_8cpp.html#a09c4701bf00d8a3fd7f570981dd8020a">ESPlives</a>.initializeMs(10000, <a class="code" href="bkp_8cpp.html#a6b874ff4f8dab5941a2f40cb8720b5f4">publishIamLive</a>).start();</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">//loadLimits.initializeMs(10000, strToProg).startOnce();</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}<div class="ttc" id="bkp_8cpp_html_a61322cd056179f03c046357d8415f94c"><div class="ttname"><a href="bkp_8cpp.html#a61322cd056179f03c046357d8415f94c">MQTT_USER</a></div><div class="ttdeci">#define MQTT_USER</div><div class="ttdef"><b>Definition:</b> bkp.cpp:24</div></div>
<div class="ttc" id="bkp_8cpp_html_a7a0ce9d431921ecc0c5b9fdb0705f7f5"><div class="ttname"><a href="bkp_8cpp.html#a7a0ce9d431921ecc0c5b9fdb0705f7f5">checkConn</a></div><div class="ttdeci">Timer checkConn</div><div class="ttdef"><b>Definition:</b> bkp.cpp:71</div></div>
<div class="ttc" id="bkp_8cpp_html_af835ca2e62a58a0185a7b26119b5a28a"><div class="ttname"><a href="bkp_8cpp.html#af835ca2e62a58a0185a7b26119b5a28a">MQTT_PASSWD</a></div><div class="ttdeci">#define MQTT_PASSWD</div><div class="ttdef"><b>Definition:</b> bkp.cpp:25</div></div>
<div class="ttc" id="bkp_8cpp_html_ac10ba9aa93cfd1e6af68654041615a66"><div class="ttname"><a href="bkp_8cpp.html#ac10ba9aa93cfd1e6af68654041615a66">keepLooking</a></div><div class="ttdeci">void keepLooking()</div><div class="ttdoc">Garantia da conexão constate. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:604</div></div>
<div class="ttc" id="bkp_8cpp_html_a09c4701bf00d8a3fd7f570981dd8020a"><div class="ttname"><a href="bkp_8cpp.html#a09c4701bf00d8a3fd7f570981dd8020a">ESPlives</a></div><div class="ttdeci">Timer ESPlives</div><div class="ttdef"><b>Definition:</b> bkp.cpp:72</div></div>
<div class="ttc" id="bkp_8cpp_html_a6b874ff4f8dab5941a2f40cb8720b5f4"><div class="ttname"><a href="bkp_8cpp.html#a6b874ff4f8dab5941a2f40cb8720b5f4">publishIamLive</a></div><div class="ttdeci">void publishIamLive()</div><div class="ttdoc">Apenas publica o status da conexão. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:534</div></div>
<div class="ttc" id="bkp_8cpp_html_ae699343bc1f025ded5a0c253b82b5523"><div class="ttname"><a href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a></div><div class="ttdeci">void sleep(unsigned long interval_ms)</div><div class="ttdoc">Função de sleep sem delay no hardware. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:295</div></div>
<div class="ttc" id="bkp_8cpp_html_a9cc79d426dc372ffc2ab63b89e4a6ffc"><div class="ttname"><a href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a></div><div class="ttdeci">MqttClient mqtt(MQTT_BROKER, MQTT_PORT, onMessageReceived)</div><div class="ttdoc">Criacao do objeto para comunicacao via MQTT. </div></div>
<div class="ttc" id="bkp_8cpp_html_a0649cc41f4634a4f04a2952a26b81be1"><div class="ttname"><a href="bkp_8cpp.html#a0649cc41f4634a4f04a2952a26b81be1">adjustment</a></div><div class="ttdeci">void adjustment(int A, int B, int C)</div><div class="ttdoc">Configuração dos pinos de GPIO. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:266</div></div>
<div class="ttc" id="bkp_8cpp_html_a33357d3b1f43ab361de47f76beba33c7"><div class="ttname"><a href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if</a></div><div class="ttdeci">void sta_if()</div><div class="ttdoc">Configuração inicial da interface sta e desabilitação do modo AP. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:585</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac10ba9aa93cfd1e6af68654041615a66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void keepLooking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Garantia da conexão constate. </p>
<p>Essa função se encarrega de manter a conexão funcional em qualquer situação. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt()</a> e <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                  {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.getConnectionState() != eTCS_Connected){</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        Serial.println(<span class="stringliteral">&quot;Reconectando!!!&quot;</span>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a>();</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a9cc79d426dc372ffc2ab63b89e4a6ffc"><div class="ttname"><a href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a></div><div class="ttdeci">MqttClient mqtt(MQTT_BROKER, MQTT_PORT, onMessageReceived)</div><div class="ttdoc">Criacao do objeto para comunicacao via MQTT. </div></div>
<div class="ttc" id="bkp_8cpp_html_a892beb36b29757b806f0c0b4f7297194"><div class="ttname"><a href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a></div><div class="ttdeci">void startMqttClient()</div><div class="ttdoc">Inicializador da conexão com o broker. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:543</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab46c9200feab2324aece7d95d81b422"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void logEvent </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log de excessões. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a69d4676733f5e850f451942b6d901382">LOG_FILE</a> e <a class="el" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a6f39764260e93458ec30c2766b9a4581">failed()</a>, <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a> e <a class="el" href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader()</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                         {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    file_t logF = fileOpen(<a class="code" href="bkp_8cpp.html#a69d4676733f5e850f451942b6d901382">LOG_FILE</a>, eFO_CreateIfNotExist|eFO_Append);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (logF &lt; 0){</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        Serial.println(<span class="stringliteral">&quot;Nao pude criar o arquivo de log.&quot;</span>);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        fileClose(logF);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    fileWrite(logF,msg.c_str(),1);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    fileClose(logF);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    </div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    Serial.println(<span class="stringliteral">&quot;Arquivo yevesta.log criado com sucesso&quot;</span>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    Serial.println(<span class="stringliteral">&quot;Reiniciando agora...&quot;</span>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a>(300);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">//System.restart();</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a69d4676733f5e850f451942b6d901382"><div class="ttname"><a href="bkp_8cpp.html#a69d4676733f5e850f451942b6d901382">LOG_FILE</a></div><div class="ttdeci">#define LOG_FILE</div><div class="ttdef"><b>Definition:</b> bkp.cpp:29</div></div>
<div class="ttc" id="bkp_8cpp_html_ae699343bc1f025ded5a0c253b82b5523"><div class="ttname"><a href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a></div><div class="ttdeci">void sleep(unsigned long interval_ms)</div><div class="ttdoc">Função de sleep sem delay no hardware. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:295</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a4a3cef40cd8acefe8d3913380a814a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ls </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lista arquivos no sistema de arquivos SPIFFS. </p>
<p>Uma listagem simples, apenas para ver os arquivos disponíveis. </p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a>, <a class="el" href="bkp_8cpp.html#ac8fc66eef843fe30c761b569fb794929">readFile()</a> e <a class="el" href="bkp_8cpp.html#a00bc60a1bfa7bed7fb38c7f453ef2717">successful()</a>.</p>
<div class="fragment"><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    Vector&lt;String&gt; files = fileList();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    Serial.println(<span class="stringliteral">&quot;Listando arquivos:&quot;</span>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;files.count(); i++){</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        Serial.println(files.get(i) + <span class="stringliteral">&quot; - &quot;</span> + String(fileGetSize(files.get(i))) + <span class="stringliteral">&quot; Bytes&quot;</span>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9cc79d426dc372ffc2ab63b89e4a6ffc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MqttClient mqtt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="bkp_8cpp.html#a03acf61c3de2517e471494cea2f44755">MQTT_BROKER</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bkp_8cpp.html#aa8632baff6bbb5004385998918f1e6bd">MQTT_PORT</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Criacao do objeto para comunicacao via MQTT. </p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>, <a class="el" href="bkp_8cpp.html#ac10ba9aa93cfd1e6af68654041615a66">keepLooking()</a>, <a class="el" href="bkp_8cpp.html#a6b874ff4f8dab5941a2f40cb8720b5f4">publishIamLive()</a>, <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a> e <a class="el" href="bkp_8cpp.html#a00bc60a1bfa7bed7fb38c7f453ef2717">successful()</a>.</p>

</div>
</div>
<a class="anchor" id="acf973281aa7136adc0a9cbcb6e987d11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void onMessageReceived </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback do MQTT. </p>
<p>Essa funcao é utilizada como callback da comunicação MQTT. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram()</a>, <a class="el" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent()</a>, <a class="el" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls()</a>, <a class="el" href="bkp_8cpp.html#ac8fc66eef843fe30c761b569fb794929">readFile()</a>, <a class="el" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a>, <a class="el" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>, <a class="el" href="bkp_8cpp.html#aef33cd7f378fde34666db36ef28b78ed">settingTemps()</a>, <a class="el" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep()</a>, <a class="el" href="bkp_8cpp.html#afa6660710b4c098bf036f8a48d80da5a">strToProg()</a>, <a class="el" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a> e <a class="el" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                               {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   Serial.println(topic);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   Serial.println(msg);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   Serial.print(<span class="stringliteral">&quot;Temperaturas do programa atual: &quot;</span>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   Serial.println(<a class="code" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   Serial.println(<a class="code" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   </div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;beer/program&quot;</span>){</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;       <span class="keywordflow">if</span> (msg.charAt(0) == <span class="charliteral">&#39;F&#39;</span>){</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;           <a class="code" href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram</a>(<span class="stringliteral">&quot;F&quot;</span>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;       }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.charAt(0) == <span class="charliteral">&#39;M&#39;</span>){</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;           <a class="code" href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram</a>(<span class="stringliteral">&quot;M&quot;</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;       }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.charAt(0) == <span class="charliteral">&#39;P&#39;</span>){</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;           <a class="code" href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram</a>(<span class="stringliteral">&quot;P&quot;</span>);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;       }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;       <span class="keywordflow">else</span>{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;           Serial.print(<span class="stringliteral">&quot;Mensagem invalida: &quot;</span>);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;           Serial.println(msg);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;           <a class="code" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent</a>(<span class="stringliteral">&quot;Mensagem invalida no topico beer/program&quot;</span>);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;       }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;beer/temperature&quot;</span>){</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;       <span class="comment">/*</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">       for (int i=0;i&lt;msg.length();i++){</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">           if (!isdigit(msg.charAt(i)) &amp;&amp; msg.charAt(i) != &#39;.&#39;){</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">           Serial.println(&quot;Nao parece temperatura. Abortando...&quot;);</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">           return;</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">           }</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">       }</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;       </div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;       <span class="keywordtype">float</span> temp = msg.toFloat();</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;       Serial.print(<span class="stringliteral">&quot;Conversao de String para float. Resultado: &quot;</span>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;       Serial.println(temp);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;       <span class="keywordflow">if</span> (temp &lt;= <a class="code" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a>){</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;           <span class="comment">//rele off</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a>,LOW);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;       }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;       <span class="keywordflow">if</span> (temp &gt;= <a class="code" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a>){</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;           <span class="comment">//rele on</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a>,HIGH);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;           <a class="code" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a>(300);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>,HIGH);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;           <a class="code" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a>(1500);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>,LOW);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;       }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;beer/ls&quot;</span>){</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;       <a class="code" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a>();            </div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;beer/ini&quot;</span>){</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;       <a class="code" href="bkp_8cpp.html#ac8fc66eef843fe30c761b569fb794929">readFile</a>(msg);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;beer/relay&quot;</span>){</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;       <span class="keywordflow">if</span> (msg.charAt(0) == <span class="charliteral">&#39;0&#39;</span>){</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a>,HIGH);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;       }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.charAt(0) == <span class="charliteral">&#39;1&#39;</span>){</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a>,LOW);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;       }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.charAt(0) == <span class="charliteral">&#39;2&#39;</span>){</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>,HIGH);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;       }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.charAt(0) == <span class="charliteral">&#39;3&#39;</span>){</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;           digitalWrite(<a class="code" href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a>,LOW);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;       }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;beer/minMax&quot;</span>){</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;       <a class="code" href="bkp_8cpp.html#aef33cd7f378fde34666db36ef28b78ed">settingTemps</a>(msg);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (topic == <span class="stringliteral">&quot;beer/limits&quot;</span>){</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;       <a class="code" href="bkp_8cpp.html#afa6660710b4c098bf036f8a48d80da5a">strToProg</a>();</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a73dae65344123317a4a416e34b6cc29d"><div class="ttname"><a href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a></div><div class="ttdeci">double temp_max</div><div class="ttdoc">Atribuicao de temperatura maxima. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:68</div></div>
<div class="ttc" id="bkp_8cpp_html_ac8fc66eef843fe30c761b569fb794929"><div class="ttname"><a href="bkp_8cpp.html#ac8fc66eef843fe30c761b569fb794929">readFile</a></div><div class="ttdeci">void readFile(String fileToRead)</div><div class="ttdoc">Leitor do conteúdo de um arquivo. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:410</div></div>
<div class="ttc" id="bkp_8cpp_html_a45d328ff2302c5cc94268b38344ca3a0"><div class="ttname"><a href="bkp_8cpp.html#a45d328ff2302c5cc94268b38344ca3a0">RELAY_ONE_PIN</a></div><div class="ttdeci">#define RELAY_ONE_PIN</div><div class="ttdef"><b>Definition:</b> bkp.cpp:35</div></div>
<div class="ttc" id="bkp_8cpp_html_ab17bf582f7905e9142f5498c426bebba"><div class="ttname"><a href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram</a></div><div class="ttdeci">void defineProgram(String flag)</div><div class="ttdoc">Escolha da fase. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:376</div></div>
<div class="ttc" id="bkp_8cpp_html_a0a4a3cef40cd8acefe8d3913380a814a"><div class="ttname"><a href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a></div><div class="ttdeci">void ls()</div><div class="ttdoc">Lista arquivos no sistema de arquivos SPIFFS. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:556</div></div>
<div class="ttc" id="bkp_8cpp_html_a19e734a068d8a801de60c91fd69bc065"><div class="ttname"><a href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a></div><div class="ttdeci">double temp_min</div><div class="ttdoc">Atribuicao de temperatura minima. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:66</div></div>
<div class="ttc" id="bkp_8cpp_html_afa6660710b4c098bf036f8a48d80da5a"><div class="ttname"><a href="bkp_8cpp.html#afa6660710b4c098bf036f8a48d80da5a">strToProg</a></div><div class="ttdeci">void strToProg()</div><div class="ttdoc">Carrega os valores do arquivo limits.ini. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:138</div></div>
<div class="ttc" id="bkp_8cpp_html_aab46c9200feab2324aece7d95d81b422"><div class="ttname"><a href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent</a></div><div class="ttdeci">void logEvent(String msg)</div><div class="ttdoc">Log de excessões. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:306</div></div>
<div class="ttc" id="bkp_8cpp_html_ae699343bc1f025ded5a0c253b82b5523"><div class="ttname"><a href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a></div><div class="ttdeci">void sleep(unsigned long interval_ms)</div><div class="ttdoc">Função de sleep sem delay no hardware. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:295</div></div>
<div class="ttc" id="bkp_8cpp_html_a17efb948c2a3efc0d6e60165e4d2dbc2"><div class="ttname"><a href="bkp_8cpp.html#a17efb948c2a3efc0d6e60165e4d2dbc2">RELAY_TWO_PIN</a></div><div class="ttdeci">#define RELAY_TWO_PIN</div><div class="ttdef"><b>Definition:</b> bkp.cpp:36</div></div>
<div class="ttc" id="bkp_8cpp_html_aef33cd7f378fde34666db36ef28b78ed"><div class="ttname"><a href="bkp_8cpp.html#aef33cd7f378fde34666db36ef28b78ed">settingTemps</a></div><div class="ttdeci">void settingTemps(String toSlice)</div><div class="ttdoc">Configuração das temperaturas. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:217</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49f3533cd006030374cbea6c61ec7e20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void programLoader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Se existir, carrega o valor do arquivo program.ini. </p>
<p>Quando existe o arquivo program.ini, le o conteudo para a variavel program_to . </p>

<p>Referências <a class="el" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a>, <a class="el" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a>, <a class="el" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a>, <a class="el" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent()</a>, <a class="el" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a>, <a class="el" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a>, <a class="el" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a>, <a class="el" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a>, <a class="el" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a> e <a class="el" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#ab17bf582f7905e9142f5498c426bebba">defineProgram()</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordtype">char</span> flag;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (fileExist(<a class="code" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a>)){</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        file_t inifile = fileOpen(<a class="code" href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a>,eFO_ReadOnly);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        fileSeek(inifile,0,eSO_FileStart);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        fileRead(inifile,&amp;flag,1);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        fileClose(inifile);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="comment">//program_to = fileGetContent(INI_FILE);</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="comment">//TODO: check file stat</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">if</span> (flag == <span class="charliteral">&#39;F&#39;</span>){</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <a class="code" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a> = <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">fermentation_min</a>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <a class="code" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a> = <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">fermentation_max</a>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            </div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            Serial.println(<span class="stringliteral">&quot;Programa carregado: FERMENTATION&quot;</span>);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            Serial.print(<span class="stringliteral">&quot;Minima: &quot;</span>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            Serial.println(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">fermentation_min</a>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            Serial.print(<span class="stringliteral">&quot;Maxima: &quot;</span>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            Serial.println(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">fermentation_max</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flag == <span class="charliteral">&#39;M&#39;</span>){</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <a class="code" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a> = <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">maturation_min</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a> = <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">maturation_max</a>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            </div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            Serial.println(<span class="stringliteral">&quot;Programa carregado: MATURATION&quot;</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            Serial.print(<span class="stringliteral">&quot;Minima: &quot;</span>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            Serial.println(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">maturation_min</a>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            Serial.print(<span class="stringliteral">&quot;Maxima: &quot;</span>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            Serial.println(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">maturation_max</a>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flag == <span class="charliteral">&#39;P&#39;</span>){</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <a class="code" href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a> = <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">priming_min</a>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a> = <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">priming_max</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            </div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            Serial.println(<span class="stringliteral">&quot;Programa carregado: PRIMING&quot;</span>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            Serial.print(<span class="stringliteral">&quot;Minima: &quot;</span>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            Serial.println(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">priming_min</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            Serial.print(<span class="stringliteral">&quot;Maxima: &quot;</span>);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            Serial.println(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">priming_max</a>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent</a>(<span class="stringliteral">&quot;O arquivo ini esta vazio ou corrompido.&quot;</span>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            Serial.println(<span class="stringliteral">&quot;Arquivo ini vazio ou corrompido.&quot;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }  </div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div><div class="ttc" id="structprogs_html_a8756cd648ee9835de9f394017b9ea14d"><div class="ttname"><a href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a></div><div class="ttdeci">double fermentation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:52</div></div>
<div class="ttc" id="bkp_8cpp_html_a73dae65344123317a4a416e34b6cc29d"><div class="ttname"><a href="bkp_8cpp.html#a73dae65344123317a4a416e34b6cc29d">temp_max</a></div><div class="ttdeci">double temp_max</div><div class="ttdoc">Atribuicao de temperatura maxima. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:68</div></div>
<div class="ttc" id="bkp_8cpp_html_adddccc5d8a187f367f29a7f3505bf5fe"><div class="ttname"><a href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a></div><div class="ttdeci">static progs programs</div><div class="ttdef"><b>Definition:</b> bkp.cpp:63</div></div>
<div class="ttc" id="structprogs_html_aa48b653431e0847dfaeeca07a5c9e001"><div class="ttname"><a href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a></div><div class="ttdeci">double maturation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:54</div></div>
<div class="ttc" id="bkp_8cpp_html_a19e734a068d8a801de60c91fd69bc065"><div class="ttname"><a href="bkp_8cpp.html#a19e734a068d8a801de60c91fd69bc065">temp_min</a></div><div class="ttdeci">double temp_min</div><div class="ttdoc">Atribuicao de temperatura minima. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:66</div></div>
<div class="ttc" id="structprogs_html_a56f13888a4de838b3f982defc44c7dc5"><div class="ttname"><a href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a></div><div class="ttdeci">double fermentation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:53</div></div>
<div class="ttc" id="bkp_8cpp_html_aab46c9200feab2324aece7d95d81b422"><div class="ttname"><a href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent</a></div><div class="ttdeci">void logEvent(String msg)</div><div class="ttdoc">Log de excessões. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:306</div></div>
<div class="ttc" id="structprogs_html_aae847fdff08fb500ea48d0fdad3e7adc"><div class="ttname"><a href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a></div><div class="ttdeci">double priming_min</div><div class="ttdef"><b>Definition:</b> application.cpp:56</div></div>
<div class="ttc" id="structprogs_html_a32a887f0ffe5495e113ef6c6493816f2"><div class="ttname"><a href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a></div><div class="ttdeci">double maturation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:55</div></div>
<div class="ttc" id="structprogs_html_a4c8475753adae318bafb6aab512a1d09"><div class="ttname"><a href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a></div><div class="ttdeci">double priming_max</div><div class="ttdef"><b>Definition:</b> application.cpp:57</div></div>
<div class="ttc" id="bkp_8cpp_html_a307da947c47f9579fc559a12c256ab96"><div class="ttname"><a href="bkp_8cpp.html#a307da947c47f9579fc559a12c256ab96">INI_FILE</a></div><div class="ttdeci">#define INI_FILE</div><div class="ttdef"><b>Definition:</b> bkp.cpp:28</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2c13c1adbd13c2d14b6a212d469d50da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String progToStr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converte valores do enumerador  em String. </p>
<p>Essa conversão é feita para utilização no método (), para carregamento de definições no próximo boot do ESP8266. O caminho reverso é feito pela função <a class="el" href="bkp_8cpp.html#afa6660710b4c098bf036f8a48d80da5a" title="Carrega os valores do arquivo limits.ini. ">strToProg()</a>. </p>

<p>Referências <a class="el" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a>, <a class="el" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a>, <a class="el" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a>, <a class="el" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a>, <a class="el" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a> e <a class="el" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a662d66308f72e9df40e791c4a5c5346b">writePrograms()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                  {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    String convert = String(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">fermentation_min</a>);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    convert.concat(<span class="stringliteral">&quot;|&quot;</span>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    convert.concat(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">fermentation_max</a>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    convert.concat(<span class="stringliteral">&quot;|&quot;</span>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    convert.concat(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">maturation_min</a>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    convert.concat(<span class="stringliteral">&quot;|&quot;</span>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    convert.concat(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">maturation_max</a>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    convert.concat(<span class="stringliteral">&quot;|&quot;</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    convert.concat(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">priming_min</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    convert.concat(<span class="stringliteral">&quot;|&quot;</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    convert.concat(<a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">priming_max</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    </div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    Serial.println(<span class="stringliteral">&quot;Resultado da conversao:&quot;</span>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    Serial.println(convert);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> convert;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="ttc" id="structprogs_html_a8756cd648ee9835de9f394017b9ea14d"><div class="ttname"><a href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a></div><div class="ttdeci">double fermentation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:52</div></div>
<div class="ttc" id="bkp_8cpp_html_adddccc5d8a187f367f29a7f3505bf5fe"><div class="ttname"><a href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a></div><div class="ttdeci">static progs programs</div><div class="ttdef"><b>Definition:</b> bkp.cpp:63</div></div>
<div class="ttc" id="structprogs_html_aa48b653431e0847dfaeeca07a5c9e001"><div class="ttname"><a href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a></div><div class="ttdeci">double maturation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:54</div></div>
<div class="ttc" id="structprogs_html_a56f13888a4de838b3f982defc44c7dc5"><div class="ttname"><a href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a></div><div class="ttdeci">double fermentation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:53</div></div>
<div class="ttc" id="structprogs_html_aae847fdff08fb500ea48d0fdad3e7adc"><div class="ttname"><a href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a></div><div class="ttdeci">double priming_min</div><div class="ttdef"><b>Definition:</b> application.cpp:56</div></div>
<div class="ttc" id="structprogs_html_a32a887f0ffe5495e113ef6c6493816f2"><div class="ttname"><a href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a></div><div class="ttdeci">double maturation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:55</div></div>
<div class="ttc" id="structprogs_html_a4c8475753adae318bafb6aab512a1d09"><div class="ttname"><a href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a></div><div class="ttdeci">double priming_max</div><div class="ttdef"><b>Definition:</b> application.cpp:57</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b874ff4f8dab5941a2f40cb8720b5f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void publishIamLive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apenas publica o status da conexão. </p>
<p>Esse publishing é feito a partir de um timer disparado de dentro da função <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947" title="Inicializador de execução. ">init()</a>. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt()</a> e <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                     {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.getConnectionState() != eTCS_Connected)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a>(); <span class="comment">// Auto reconnect</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    Serial.println(<span class="stringliteral">&quot;Publicando status&quot;</span>);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.publish(<span class="stringliteral">&quot;freezer/alive&quot;</span>, <span class="stringliteral">&quot;Alive&quot;</span>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a9cc79d426dc372ffc2ab63b89e4a6ffc"><div class="ttname"><a href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a></div><div class="ttdeci">MqttClient mqtt(MQTT_BROKER, MQTT_PORT, onMessageReceived)</div><div class="ttdoc">Criacao do objeto para comunicacao via MQTT. </div></div>
<div class="ttc" id="bkp_8cpp_html_a892beb36b29757b806f0c0b4f7297194"><div class="ttname"><a href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a></div><div class="ttdeci">void startMqttClient()</div><div class="ttdoc">Inicializador da conexão com o broker. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:543</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac8fc66eef843fe30c761b569fb794929"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readFile </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>fileToRead</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Leitor do conteúdo de um arquivo. </p>
<p>No momento essa função faz exclusivamente a leitura do primeiro byte do arquivo de modo de operação (program.ini). Utilizado apenas em debug. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a>();</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    Serial.println(<span class="stringliteral">&quot;Abrindo arquivo...&quot;</span>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    file_t fileChoose = fileOpen(fileToRead,eFO_ReadOnly);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (fileChoose == -10002){</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        Serial.println(<span class="stringliteral">&quot;Arquivo nao encontrado. Conteudo existente:&quot;</span>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <a class="code" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a>();</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fileChoose == -10010){</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        Serial.println(<span class="stringliteral">&quot;Descritor de arquivo incorreto&quot;</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <a class="code" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a>();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">char</span> result[2] = {<span class="charliteral">&#39;\0&#39;</span>};</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    Serial.println(<span class="stringliteral">&quot;Lendo conteudo...&quot;</span>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    </div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    fileSeek(fileChoose,0,eSO_FileStart);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">char</span> wrote[40];</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;40;i++){</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        wrote[i] = 0;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordtype">int</span> size = fileGetSize(fileToRead);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">int</span> content = fileRead(fileChoose,&amp;wrote,size);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    Serial.print(<span class="stringliteral">&quot;Conteudo do arquivo: &quot;</span>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    Serial.println(wrote);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    fileClose(fileChoose);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a0a4a3cef40cd8acefe8d3913380a814a"><div class="ttname"><a href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a></div><div class="ttdeci">void ls()</div><div class="ttdoc">Lista arquivos no sistema de arquivos SPIFFS. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:556</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef33cd7f378fde34666db36ef28b78ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void settingTemps </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>toSlice</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configuração das temperaturas. </p>
<p>Essa função permite mudar as temperaturas pré-definidas para quando o tipo de programa for escolhido, a mínima e máxima desse programa já estejam dentro do padrão desejado. O parâmetro tem que receber o formato MINIMA|MAXIMA|PROGRAMA . Ex.: 13.5|14.5|M Isso dá uma mínima de 13.5, máxima de 14.5 e esses valores são inseridos no programa MATURATION. Os programas são: F (Fermentation) M (Maturation) P (Priming)</p>
<p>Essa função substitui os valores do respectivo programa no enumerador programs. </p>

<p>Referências <a class="el" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a>, <a class="el" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a>, <a class="el" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a>, <a class="el" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a>, <a class="el" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a>, <a class="el" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a> e <a class="el" href="bkp_8cpp.html#a662d66308f72e9df40e791c4a5c5346b">writePrograms()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                 {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">float</span> tempMin = 0;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">float</span> tempMax = 0;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    </div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    Serial.println(toSlice);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">//String toSlice = &quot;13.0|17.5|F&quot;;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">int</span> first    = toSlice.indexOf(<span class="charliteral">&#39;|&#39;</span>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    tempMin      = toSlice.substring(0,first).toFloat();</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    </div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">int</span> last     = toSlice.lastIndexOf(<span class="charliteral">&#39;|&#39;</span>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    tempMax      = toSlice.substring(first+1,last).toFloat();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    </div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    Serial.println(<span class="stringliteral">&quot;Minima e Maxima:&quot;</span>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    Serial.println(tempMin);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    Serial.println(tempMax);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    Serial.println(<span class="stringliteral">&quot;----====----====----====----&quot;</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    </div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">char</span> FMP     = toSlice.charAt(toSlice.length()-1);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    </div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    Serial.print(<span class="stringliteral">&quot;Nova minima: &quot;</span>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    Serial.println(tempMin);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    Serial.print(<span class="stringliteral">&quot;Nova maxima: &quot;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    Serial.println(tempMax);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    Serial.print(<span class="stringliteral">&quot;Programa: &quot;</span>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    Serial.println(FMP);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    </div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (FMP == <span class="charliteral">&#39;F&#39;</span>){</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">fermentation_min</a> = tempMin;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">fermentation_max</a> = tempMax;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        Serial.println(<span class="stringliteral">&quot;Novos valores atribuidos ao programa Fermentation.&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FMP == <span class="charliteral">&#39;M&#39;</span>){</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">maturation_min</a>   = tempMin;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">maturation_max</a>   = tempMax;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        Serial.println(<span class="stringliteral">&quot;Novos valores atribuidos ao programa Maturation.&quot;</span>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FMP == <span class="charliteral">&#39;P&#39;</span>){</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">priming_min</a>      = tempMin;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">priming_max</a>      = tempMax;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        Serial.println(<span class="stringliteral">&quot;Novos valores atribuidos ao programa Priming.&quot;</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    Serial.println(<span class="stringliteral">&quot;Não esqueca de escolher o programa de atuacao agora.&quot;</span>);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="bkp_8cpp.html#a662d66308f72e9df40e791c4a5c5346b">writePrograms</a>();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a662d66308f72e9df40e791c4a5c5346b"><div class="ttname"><a href="bkp_8cpp.html#a662d66308f72e9df40e791c4a5c5346b">writePrograms</a></div><div class="ttdeci">void writePrograms()</div><div class="ttdoc">Escreve os limites de temperatura no arquivo limits.ini. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:189</div></div>
<div class="ttc" id="structprogs_html_a8756cd648ee9835de9f394017b9ea14d"><div class="ttname"><a href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a></div><div class="ttdeci">double fermentation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:52</div></div>
<div class="ttc" id="bkp_8cpp_html_adddccc5d8a187f367f29a7f3505bf5fe"><div class="ttname"><a href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a></div><div class="ttdeci">static progs programs</div><div class="ttdef"><b>Definition:</b> bkp.cpp:63</div></div>
<div class="ttc" id="structprogs_html_aa48b653431e0847dfaeeca07a5c9e001"><div class="ttname"><a href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a></div><div class="ttdeci">double maturation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:54</div></div>
<div class="ttc" id="structprogs_html_a56f13888a4de838b3f982defc44c7dc5"><div class="ttname"><a href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a></div><div class="ttdeci">double fermentation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:53</div></div>
<div class="ttc" id="structprogs_html_aae847fdff08fb500ea48d0fdad3e7adc"><div class="ttname"><a href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a></div><div class="ttdeci">double priming_min</div><div class="ttdef"><b>Definition:</b> application.cpp:56</div></div>
<div class="ttc" id="structprogs_html_a32a887f0ffe5495e113ef6c6493816f2"><div class="ttname"><a href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a></div><div class="ttdeci">double maturation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:55</div></div>
<div class="ttc" id="structprogs_html_a4c8475753adae318bafb6aab512a1d09"><div class="ttname"><a href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a></div><div class="ttdeci">double priming_max</div><div class="ttdef"><b>Definition:</b> application.cpp:57</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae699343bc1f025ded5a0c253b82b5523"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sleep </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>interval_ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Função de sleep sem delay no hardware. </p>
<p>Essa função faz o delay sem causar paralização de hardware, de modo que nunca acontecerá um reset por WDT (Watch Dog Timer), pois as tarefas de background continuam funcionando livremente (toda a parte relacionada ao wifi, por exemplo). O parâmetro recebido é o intervalo desejado em milisegundos. Dentro da função pode-se reparar que há um delayMilliseconds(1), que é 1ms de delay por loop, para que o processador não seja ocupado integralmente na execução do loop. Atenção: Utilizar <a class="el" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523" title="Função de sleep sem delay no hardware. ">sleep()</a> é a melhor forma de garantir que não haverá uma indisponibilidade de recursos para a tarefa de background, o que poderia ocasionar um reset do WDT (Watch Dog Timer). </p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>, <a class="el" href="bkp_8cpp.html#aab46c9200feab2324aece7d95d81b422">logEvent()</a>, <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a> e <a class="el" href="bkp_8cpp.html#a662d66308f72e9df40e791c4a5c5346b">writePrograms()</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                     {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> initial_time = millis();</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> delta        = millis()-initial_time;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    </div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">while</span> (delta &lt; interval_ms){</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        delta = millis()-initial_time;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        delayMilliseconds(1); <span class="comment">//apenas para a CPU &#39;respirar&#39;</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af194b7304fe850600cc1028dbbb046ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void split </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reatribuição da struct programs. </p>
<p>Quando modificados os valores da struct de limites dos programas de temperatura, é necessário carregá-los. Essa função se encarrega de fazer a reatribuição dos valores. </p>

<p>Referências <a class="el" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a>, <a class="el" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a>, <a class="el" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a>, <a class="el" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a>, <a class="el" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a> e <a class="el" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#afa6660710b4c098bf036f8a48d80da5a">strToProg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                               {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">char</span> value[5] = {0};</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">int</span> j         = 0;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    Vector &lt;String&gt; str_temps;   </div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    </div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;size;i++){</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span> (buf[i] == <span class="charliteral">&#39;|&#39;</span>){</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            value[j] = 0;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            Serial.println(value);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="comment">//Adiciona char* ao vetor de strings...</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            str_temps.add(value);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="comment">//zerar o array que guarda o valor</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;5;k++){</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                value[k] = 0;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="comment">//reinicia o contador da variavel &#39;value&#39;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            j = 0;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">else</span>{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="comment">//um,dois,tres, pin...</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            value[j] = buf[i];</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            j++;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    Serial.println(<span class="stringliteral">&quot;---------------------&quot;</span>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;str_temps.count();k++){</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        Serial.println(str_temps.at(k));</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    Serial.println(<span class="stringliteral">&quot;---------------------&quot;</span>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    </div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">fermentation_min</a> = str_temps[0].toFloat();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">fermentation_max</a> = str_temps[1].toFloat();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">maturation_min</a>   = str_temps[2].toFloat();</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">maturation_max</a>   = str_temps[3].toFloat();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">priming_min</a>      = str_temps[4].toFloat();</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a>.<a class="code" href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">priming_max</a>      = str_temps[5].toFloat();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    Serial.println(<span class="stringliteral">&quot;Novos valores atribuidos.&quot;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="ttc" id="structprogs_html_a8756cd648ee9835de9f394017b9ea14d"><div class="ttname"><a href="structprogs.html#a8756cd648ee9835de9f394017b9ea14d">progs::fermentation_min</a></div><div class="ttdeci">double fermentation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:52</div></div>
<div class="ttc" id="bkp_8cpp_html_adddccc5d8a187f367f29a7f3505bf5fe"><div class="ttname"><a href="bkp_8cpp.html#adddccc5d8a187f367f29a7f3505bf5fe">programs</a></div><div class="ttdeci">static progs programs</div><div class="ttdef"><b>Definition:</b> bkp.cpp:63</div></div>
<div class="ttc" id="structprogs_html_aa48b653431e0847dfaeeca07a5c9e001"><div class="ttname"><a href="structprogs.html#aa48b653431e0847dfaeeca07a5c9e001">progs::maturation_min</a></div><div class="ttdeci">double maturation_min</div><div class="ttdef"><b>Definition:</b> application.cpp:54</div></div>
<div class="ttc" id="structprogs_html_a56f13888a4de838b3f982defc44c7dc5"><div class="ttname"><a href="structprogs.html#a56f13888a4de838b3f982defc44c7dc5">progs::fermentation_max</a></div><div class="ttdeci">double fermentation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:53</div></div>
<div class="ttc" id="structprogs_html_aae847fdff08fb500ea48d0fdad3e7adc"><div class="ttname"><a href="structprogs.html#aae847fdff08fb500ea48d0fdad3e7adc">progs::priming_min</a></div><div class="ttdeci">double priming_min</div><div class="ttdef"><b>Definition:</b> application.cpp:56</div></div>
<div class="ttc" id="structprogs_html_a32a887f0ffe5495e113ef6c6493816f2"><div class="ttname"><a href="structprogs.html#a32a887f0ffe5495e113ef6c6493816f2">progs::maturation_max</a></div><div class="ttdeci">double maturation_max</div><div class="ttdef"><b>Definition:</b> application.cpp:55</div></div>
<div class="ttc" id="structprogs_html_a4c8475753adae318bafb6aab512a1d09"><div class="ttname"><a href="structprogs.html#a4c8475753adae318bafb6aab512a1d09">progs::priming_max</a></div><div class="ttdeci">double priming_max</div><div class="ttdef"><b>Definition:</b> application.cpp:57</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a33357d3b1f43ab361de47f76beba33c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sta_if </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configuração inicial da interface sta e desabilitação do modo AP. </p>
<p>Essa função se encarrega de fazer a primeira conexão com a rede WiFi especificada nos defines no inicio do programa. Após confirmada a conexão, o modo AP é desabilitado. Nos resets do ESP8266 essa função não terá mais efeito. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a6f39764260e93458ec30c2766b9a4581">failed()</a>, <a class="el" href="bkp_8cpp.html#ad8fdb5978250039eb1280a41af8a490a">MY_PASSWD</a>, <a class="el" href="bkp_8cpp.html#ac08aeb1550b2af3e525809616d2053b6">MY_SSID</a> e <a class="el" href="bkp_8cpp.html#a00bc60a1bfa7bed7fb38c7f453ef2717">successful()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;             {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">if</span> (!WifiStation.isEnabled()){</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        WifiStation.enable(<span class="keyword">true</span>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        Serial.println(<span class="stringliteral">&quot;Ativando interface sta...&quot;</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (!WifiStation.isConnected()){</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        WifiStation.config(<a class="code" href="bkp_8cpp.html#ac08aeb1550b2af3e525809616d2053b6">MY_SSID</a>,<a class="code" href="bkp_8cpp.html#ad8fdb5978250039eb1280a41af8a490a">MY_PASSWD</a>,<span class="keyword">true</span>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        Serial.println(<span class="stringliteral">&quot;Conectando ao SSID...&quot;</span>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (WifiAccessPoint.isEnabled() &amp;&amp; WifiStation.isConnected()){</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        WifiAccessPoint.enable(<span class="keyword">false</span>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        Serial.println(<span class="stringliteral">&quot;Desativando AP...&quot;</span>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    </div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    WifiStation.waitConnection(<a class="code" href="bkp_8cpp.html#a00bc60a1bfa7bed7fb38c7f453ef2717">successful</a>,20,<a class="code" href="bkp_8cpp.html#a6f39764260e93458ec30c2766b9a4581">failed</a>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_ac08aeb1550b2af3e525809616d2053b6"><div class="ttname"><a href="bkp_8cpp.html#ac08aeb1550b2af3e525809616d2053b6">MY_SSID</a></div><div class="ttdeci">#define MY_SSID</div><div class="ttdef"><b>Definition:</b> bkp.cpp:32</div></div>
<div class="ttc" id="bkp_8cpp_html_ad8fdb5978250039eb1280a41af8a490a"><div class="ttname"><a href="bkp_8cpp.html#ad8fdb5978250039eb1280a41af8a490a">MY_PASSWD</a></div><div class="ttdeci">#define MY_PASSWD</div><div class="ttdef"><b>Definition:</b> bkp.cpp:33</div></div>
<div class="ttc" id="bkp_8cpp_html_a00bc60a1bfa7bed7fb38c7f453ef2717"><div class="ttname"><a href="bkp_8cpp.html#a00bc60a1bfa7bed7fb38c7f453ef2717">successful</a></div><div class="ttdeci">void successful()</div><div class="ttdoc">Chamada em caso de sucesso na conexão com o broker. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:572</div></div>
<div class="ttc" id="bkp_8cpp_html_a6f39764260e93458ec30c2766b9a4581"><div class="ttname"><a href="bkp_8cpp.html#a6f39764260e93458ec30c2766b9a4581">failed</a></div><div class="ttdeci">void failed()</div><div class="ttdoc">Chamada em caso de falha da conexão com o broker. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:565</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a892beb36b29757b806f0c0b4f7297194"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startMqttClient </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inicializador da conexão com o broker. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt()</a>, <a class="el" href="bkp_8cpp.html#af835ca2e62a58a0185a7b26119b5a28a">MQTT_PASSWD</a>, <a class="el" href="bkp_8cpp.html#a61322cd056179f03c046357d8415f94c">MQTT_USER</a> e <a class="el" href="bkp_8cpp.html#a869994b48a9246624503f4d4a37bc3e0">procTimer</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a2d88cd4d6d8755463f3044ebe71365f2">checkMQTTDisconnect()</a>, <a class="el" href="bkp_8cpp.html#ac10ba9aa93cfd1e6af68654041615a66">keepLooking()</a>, <a class="el" href="bkp_8cpp.html#a6b874ff4f8dab5941a2f40cb8720b5f4">publishIamLive()</a> e <a class="el" href="bkp_8cpp.html#a00bc60a1bfa7bed7fb38c7f453ef2717">successful()</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                      {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="bkp_8cpp.html#a869994b48a9246624503f4d4a37bc3e0">procTimer</a>.stop();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    TcpClientState state_is = <a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.getConnectionState();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    Serial.println(<span class="stringliteral">&quot;------------------------&quot;</span>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    Serial.println(state_is);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    Serial.println(<span class="stringliteral">&quot;------------------------&quot;</span>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.connect(<span class="stringliteral">&quot;ElectroDragon&quot;</span>, <a class="code" href="bkp_8cpp.html#a61322cd056179f03c046357d8415f94c">MQTT_USER</a>, <a class="code" href="bkp_8cpp.html#af835ca2e62a58a0185a7b26119b5a28a">MQTT_PASSWD</a>);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">//mqtt.setCompleteDelegate(checkMQTTDisconnect);</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.subscribe(<span class="stringliteral">&quot;beer/#&quot;</span>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a61322cd056179f03c046357d8415f94c"><div class="ttname"><a href="bkp_8cpp.html#a61322cd056179f03c046357d8415f94c">MQTT_USER</a></div><div class="ttdeci">#define MQTT_USER</div><div class="ttdef"><b>Definition:</b> bkp.cpp:24</div></div>
<div class="ttc" id="bkp_8cpp_html_af835ca2e62a58a0185a7b26119b5a28a"><div class="ttname"><a href="bkp_8cpp.html#af835ca2e62a58a0185a7b26119b5a28a">MQTT_PASSWD</a></div><div class="ttdeci">#define MQTT_PASSWD</div><div class="ttdef"><b>Definition:</b> bkp.cpp:25</div></div>
<div class="ttc" id="bkp_8cpp_html_a869994b48a9246624503f4d4a37bc3e0"><div class="ttname"><a href="bkp_8cpp.html#a869994b48a9246624503f4d4a37bc3e0">procTimer</a></div><div class="ttdeci">Timer procTimer</div><div class="ttdef"><b>Definition:</b> bkp.cpp:70</div></div>
<div class="ttc" id="bkp_8cpp_html_a9cc79d426dc372ffc2ab63b89e4a6ffc"><div class="ttname"><a href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a></div><div class="ttdeci">MqttClient mqtt(MQTT_BROKER, MQTT_PORT, onMessageReceived)</div><div class="ttdoc">Criacao do objeto para comunicacao via MQTT. </div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afa6660710b4c098bf036f8a48d80da5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void strToProg </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Carrega os valores do arquivo limits.ini. </p>
<p>Quando há qualquer modificação em um dos valores do struct programs, um arquivo limits.ini é criado com todos os valores de atribuição do struct programs. Se houver um reboot, os valores predefinidos in flow não serão perdidos, pois serão caregados desse arquivo. Essa função se encarrega de fazer essa carga. Ela é chamada a partir da primeira função do init (adjustments()). </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a> e <a class="el" href="bkp_8cpp.html#af194b7304fe850600cc1028dbbb046ea">split()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (!fileExist(<a class="code" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>)){</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">int</span> size = fileGetSize(<a class="code" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">char</span> buf[size];</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;size;i++){</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        buf[i] = 0;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    file_t limits_ini = fileOpen(<a class="code" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>, eFO_ReadOnly);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    fileSeek(limits_ini,0,eSO_FileStart);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordtype">int</span> size_return   = fileRead(limits_ini,&amp;buf,size);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    fileClose(limits_ini);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    Serial.print(<span class="stringliteral">&quot;Valores limites: &quot;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    Serial.println(buf);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="bkp_8cpp.html#af194b7304fe850600cc1028dbbb046ea">split</a>(buf,size);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_af194b7304fe850600cc1028dbbb046ea"><div class="ttname"><a href="bkp_8cpp.html#af194b7304fe850600cc1028dbbb046ea">split</a></div><div class="ttdeci">void split(char *buf, int size)</div><div class="ttdoc">Reatribuição da struct programs. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:91</div></div>
<div class="ttc" id="bkp_8cpp_html_a707ee489709a9b3c044992ba98782d0c"><div class="ttname"><a href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a></div><div class="ttdeci">#define LIM_FILE</div><div class="ttdef"><b>Definition:</b> bkp.cpp:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a00bc60a1bfa7bed7fb38c7f453ef2717"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void successful </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chamada em caso de sucesso na conexão com o broker. </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls()</a>, <a class="el" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt()</a> e <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a33357d3b1f43ab361de47f76beba33c7">sta_if()</a>.</p>
<div class="fragment"><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                 {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    Serial.println(<span class="stringliteral">&quot;Conexao bem sucedida. Iniciando MQTT...&quot;</span>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a>.publish(<span class="stringliteral">&quot;freezer/alive&quot;</span>, <span class="stringliteral">&quot;Starting&quot;</span>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a>();</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a>();</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a0a4a3cef40cd8acefe8d3913380a814a"><div class="ttname"><a href="bkp_8cpp.html#a0a4a3cef40cd8acefe8d3913380a814a">ls</a></div><div class="ttdeci">void ls()</div><div class="ttdoc">Lista arquivos no sistema de arquivos SPIFFS. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:556</div></div>
<div class="ttc" id="bkp_8cpp_html_a9cc79d426dc372ffc2ab63b89e4a6ffc"><div class="ttname"><a href="bkp_8cpp.html#a9cc79d426dc372ffc2ab63b89e4a6ffc">mqtt</a></div><div class="ttdeci">MqttClient mqtt(MQTT_BROKER, MQTT_PORT, onMessageReceived)</div><div class="ttdoc">Criacao do objeto para comunicacao via MQTT. </div></div>
<div class="ttc" id="bkp_8cpp_html_a892beb36b29757b806f0c0b4f7297194"><div class="ttname"><a href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient</a></div><div class="ttdeci">void startMqttClient()</div><div class="ttdoc">Inicializador da conexão com o broker. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:543</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a662d66308f72e9df40e791c4a5c5346b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writePrograms </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escreve os limites de temperatura no arquivo limits.ini. </p>
<p>Inicialmente o programa é iniciado com predefinições da inicialização do struct programs. Caso exista em disco o arquivo limits.ini, esses valores são carregados para o enumerador programs com a função de carga (). A seleção de um novo valor para qualquer um dos 3 programs é feita no tópico "beer/minMax" e a mensagem deve ter o formato descrito na função (String toSlice) . </p>

<p>Referências <a class="el" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>, <a class="el" href="bkp_8cpp.html#a2c13c1adbd13c2d14b6a212d469d50da">progToStr()</a> e <a class="el" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep()</a>.</p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#aef33cd7f378fde34666db36ef28b78ed">settingTemps()</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (fileExist(<a class="code" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>)){</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        fileDelete(<a class="code" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a>(15);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordtype">char</span> buf[40] = {<span class="charliteral">&#39;\0&#39;</span>};</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    file_t limits_ini = fileOpen(<a class="code" href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a>,eFO_ReadWrite | eFO_CreateIfNotExist);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    String result = <a class="code" href="bkp_8cpp.html#a2c13c1adbd13c2d14b6a212d469d50da">progToStr</a>();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    fileWrite(limits_ini,result.c_str(),result.length());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    fileSeek(limits_ini,0,eSO_FileStart);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    fileRead(limits_ini,&amp;buf,result.length()-1);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    fileClose(limits_ini);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    </div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div><div class="ttc" id="bkp_8cpp_html_a2c13c1adbd13c2d14b6a212d469d50da"><div class="ttname"><a href="bkp_8cpp.html#a2c13c1adbd13c2d14b6a212d469d50da">progToStr</a></div><div class="ttdeci">String progToStr()</div><div class="ttdoc">Converte valores do enumerador  em String. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:162</div></div>
<div class="ttc" id="bkp_8cpp_html_ae699343bc1f025ded5a0c253b82b5523"><div class="ttname"><a href="bkp_8cpp.html#ae699343bc1f025ded5a0c253b82b5523">sleep</a></div><div class="ttdeci">void sleep(unsigned long interval_ms)</div><div class="ttdoc">Função de sleep sem delay no hardware. </div><div class="ttdef"><b>Definition:</b> bkp.cpp:295</div></div>
<div class="ttc" id="bkp_8cpp_html_a707ee489709a9b3c044992ba98782d0c"><div class="ttname"><a href="bkp_8cpp.html#a707ee489709a9b3c044992ba98782d0c">LIM_FILE</a></div><div class="ttdeci">#define LIM_FILE</div><div class="ttdef"><b>Definition:</b> bkp.cpp:30</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variáveis</h2>
<a class="anchor" id="a7a0ce9d431921ecc0c5b9fdb0705f7f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Timer checkConn</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a09c4701bf00d8a3fd7f570981dd8020a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Timer ESPlives</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a02fd73d861ef2e4aabb38c0c9ff82947">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e9a3c5d18326d2e9f7cc17ebca036b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Timer loadLimits</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a869994b48a9246624503f4d4a37bc3e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Timer procTimer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenciado por <a class="el" href="bkp_8cpp.html#a2d88cd4d6d8755463f3044ebe71365f2">checkMQTTDisconnect()</a> e <a class="el" href="bkp_8cpp.html#a892beb36b29757b806f0c0b4f7297194">startMqttClient()</a>.</p>

</div>
</div>
<a class="anchor" id="ac28522b48efb5bbb85cfbe9d936840d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String program_to = &quot;M&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variavel que recebe a flag do estilo de programa. </p>
<p>O arquivo program.ini devera conter 1 byte, sendo: F - para Fermentacao M - para Maturacao P - para Priming Sempre que o programa for iniciado, a primeira tarefa sera verificar a existencia de um programa (mais adiante serao vistos detalhes). Se o arquivo de programa existir, seu conteudo alimenta essa variavel program_to </p>

</div>
</div>
<a class="anchor" id="adddccc5d8a187f367f29a7f3505bf5fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprogs.html">progs</a> programs = {19.0,22.0,1.0,2.0,20.0,22.0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a73dae65344123317a4a416e34b6cc29d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double temp_max = programs.fermentation_max</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atribuicao de temperatura maxima. </p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a> e <a class="el" href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader()</a>.</p>

</div>
</div>
<a class="anchor" id="a19e734a068d8a801de60c91fd69bc065"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double temp_min = programs.fermentation_min</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atribuicao de temperatura minima. </p>

<p>Referenciado por <a class="el" href="bkp_8cpp.html#acf973281aa7136adc0a9cbcb6e987d11">onMessageReceived()</a> e <a class="el" href="bkp_8cpp.html#a49f3533cd006030374cbea6c61ec7e20">programLoader()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Gerado por &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
